<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lifting Spirits | Home</title>


    <!-- Import CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.3.0/font/bootstrap-icons.css">
    <link href=" https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/css/splide.min.css " rel="stylesheet">
    <link href="styles/style.css" rel="stylesheet">


    <!-- Import JS -->
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src=" https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.4/dist/js/splide.min.js "></script>
   
    
</head>
<body>
    <div id="app">
        <main>
            <div class="container-fluid">
                <div class="row">
                    <vertical-navbar :page="page" :is-logged-in="isLoggedIn"></vertical-navbar>
              <!-- Content Area -->
              <div class="col-lg-10 col-md-9 col-12 background2 p-3 h-100 min-vh-100" v-if="created_drinks.length > 1">
                <div class="row">
                    <h1 class="p-2">Swipe to find your favourite drinks!</h1>
                    <!-- row carousel -->
                    <div class="col-6 offset-3" >
                      <div id="carouselExampleControls" class="carousel slide mx-auto"
                          data-bs-ride="carousel">
                        <div v-if="created_drinks.length === 0" class="text-center mt-5">
                            <h3>You've seen all available drinks!</h3>
                        </div>
                          <div class="carousel-inner" >
                            <div v-for="(drink,index) in created_drinks" :key="index" class="carousel-item" :class="{ active: index===0}">
                                <div class="card" >
                                    <img :src="drink.img" alt="Drink Image" >
                                    <div class="card-body">
                                        <h5 class="card-title text-white">{{drink.name}}</h5>
                                        <p class="text-white"> Type: {{drink.type}}</p>
                                    </div>
                                </div>
                            </div>
                          </div>
                               
                             
                         
                          <!-- Controls -->
                          <button class="carousel-control-prev" type="button"
                              data-bs-target="#carouselExampleControls" data-bs-slide="prev">
                              <span @click="remove()" class="carousel-control-prev-icon" aria-hidden="true"></span>
                              <span @click="remove()" >Not interested</span>
                          </button>
                          <button class="carousel-control-next" type="button"
                              data-bs-target="#carouselExampleControls" data-bs-slide="next">
                              <span @click="addToMyList(created_drinks[index])" class="carousel-control-next-icon" aria-hidden="true"></span>
                              <span @click="addToMyList(created_drinks[index])" >Hell Yes!</span>
                          </button>
                      </div>
                     
         
                  </div>
              </div>
                    </div>
                   
            </div>
        </main>
      </div>







<script>
        import { ref } from 'vue';

        const myList = ref([]); 
        const selectedDrinks = ref([]); 

</script>

<script type="module">

    import navbar from "/components/navbar.js"
    var loginAuth = JSON.parse(sessionStorage.getItem("user-info"))
    let isLoggedIn = false
    if (loginAuth == null){
        isLoggedIn = false
    }
    else{
        isLoggedIn = true
    }
    function shuffle(array) {
        for (let i = array.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [array[i], array[j]] = [array[j], array[i]]; 
        }
    }    


    const app = Vue.createApp({
        components: {
            'vertical-navbar': navbar
        },
        data() {
            return {
                myList:[],
               
                created_drinks : [
                {
                    name: "Mojito",
                    type: "Beer",
                    ingredients:["lime","rum","mint","ice"],                        
                    steps:["Muddle the mint","Mix and measure to your liking","Stir with ice"],
                    img: "https://cdn.loveandlemons.com/wp-content/uploads/2020/07/mojito.jpg",
                    status: "To Try",
                },

                {
                    name: "Sangria",
                    type: "Rum",
                    ingredients:["Orange","Apple","Sugar syrup","Brandy","Rioja wine","Ice"],                        
                    steps:["Cut the fruits","Mix and measure to your liking","Stir with ice"],
                    img: "https://hips.hearstapps.com/hmg-prod/images/sangria-index-643044ca71f12.jpg?crop=0.502xw:1.00xh;0.210xw,0&resize=1200:*",
                    status: "To Try",
                },

                {
                    name: "Whiskey Sour",
                    type: "Whiskey",
                    ingredients:["Bourdon","Lemon juice","Sugar syrup","Egg white","Angosutra bitters"],                        
                    steps:["Add bourbon, lemon juice, simple syrup and egg white, if using, to a shaker, and dry-shake for 30 seconds without ice."
                    ,"Add ice and shake again for 15–20 seconds, until well-chilled.",
                    "Strain into a rocks glass over fresh ice, or into a coupe without ice.",
                    "Garnish with 3–4 drops of Angostura bitters."],
                    img: "https://hips.hearstapps.com/hmg-prod/images/sangria-index-643044ca71f12.jpg?crop=0.502xw:1.00xh;0.210xw,0&resize=1200:*",
                    status: "To Try",
                },
                ],
                page: 'my_concoction',
                isLoggedIn: isLoggedIn,
                model: null,
            }
        },


        computed: {
        },

        methods: {
            remove() {
                const activeDrink = document.querySelector('.carousel-item.active img').getAttribute('src');
                const drinkIndex = this.created_drinks.findIndex(drink => drink.img === activeDrink);
                
                if (drinkIndex !== -1) {
                    this.created_drinks.splice(drinkIndex, 1);
                }
        
                if (this.created_drinks.length === 0) {
                    // Optional: Hide the carousel controls when no drinks are left.
                    document.querySelector('#carouselExampleControls .carousel-control-prev').style.display = 'none';
                    document.querySelector('#carouselExampleControls .carousel-control-next').style.display = 'none';
                }
            },
            addToMyList(drink) {
                this.myList.push(drink);
                this.remove();
            }
        }  
    })
    var vm = app.mount("#app")


</script>


   
    <!-- Add Bootstrap JS via CDN (for Bootstrap features like dropdowns) -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.min.js"></script>
</body>
</html>