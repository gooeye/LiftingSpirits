import { initializeApp } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-app.js";
import { getFirestore, collection, setDoc, doc, addDoc, getDoc } from "https://www.gstatic.com/firebasejs/10.5.0/firebase-firestore.js";
import { getStorage, ref, uploadBytes} from "https://www.gstatic.com/firebasejs/10.5.0/firebase-storage.js";

import { firebaseConfig } from "/js/config.js"

const app = initializeApp(firebaseConfig);
const db = getFirestore(app)
const storage = getStorage();


function create(){
    var name = document.getElementById("name").value
    var drinktype = document.getElementById("drinktype").value

    var ingredients= document.getElementById("ingredients").value
    ingredients = ingredients.split(',')

    var steps = document.getElementById("steps").value
    steps = steps.split(',')

    var bar_check = document.getElementById("available")

    if (bar_check.checked){
        var bar_name = document.getElementById("bar")
    }
    else{
        var bar_name = null
    }

    var img = document.getElementById("uploadImages").files[0]

    var img_name = img.name


    const user_info = sessionStorage.getItem("user_info")
    const user_infoObj = JSON.parse(user_info)

    const drinkRef = doc(db, "drinks", name);

    setDoc(drinkRef,{
        name: name,
        type: drinktype,

        creator: user_infoObj.username,

        ingredients: ingredients,
        steps: steps,

        bar: bar_name,

    })



}
document.getElementById("create").addEventListener("click",create)
